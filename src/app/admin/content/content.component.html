<div>
  <p>
    Monte a sua trilha do conhecimento! Escolha os tipos de conteúdo que deseja
    subir (a ordem importa):
  </p>
  <div>
    <!-- SELECT DINÂMICO -->
    <div class="div-select">
      <select class="form-control select-content" [(ngModel)]="select">
        <option value="">Tipo do conteúdo</option>
        <option *ngFor="let type of types" [value]="type.split(':')[0]">
          {{ type.split(":")[1] }}
        </option>
      </select>
      <button
        class="btn btn-success btn-send btn-lg"
        type="button"
        (click)="addContent()"
      >
        <i class="fa fa-plus"></i>
      </button>
    </div>
    <form #contentEditForm="ngForm" (change)="onChangeForm(contentEditForm)">
      <div
        class="form-group container-form"
        *ngFor="let content of vContent; let i = index"
      >
        <div class="div-content">
          <div class="col-sm-3">
            <h4>
              <b>{{ vTypes[content.type] }}</b>
            </h4>
          </div>
          <div class="col-sm-9">
            <button class="btn btn-info btn-sequence" disabled>
              Ordem: {{ content.sequence }}
            </button>
            <button class="btn btn-danger" (click)="removeType(content)">
              <i class="fa fa-trash"></i>
            </button>
          </div>
        </div>
        <div class="div-content">
          <label class="col-sm-3 col-form-label">Nome</label>
          <div class="col-sm-9">
            <input
              class="form-control"
              name="name_conteudo{{ i }}"
              #name="ngModel"
              type="text"
              [(ngModel)]="content.name"
              placeholder="Nome do Conteúdo"
              required
            />
            <span *ngIf="!name.value && name.touched"
              >O nome é obrigatório!</span
            >
          </div>
        </div>

        <div class="div-content">
          <label class="col-sm-3 col-form-label">Tempo de Exibição</label>
          <div class="col-sm-9">
            <input
              class="form-control"
              name="time{{ i }}"
              type="number"
              [(ngModel)]="content.time"
              #time="ngModel"
              value="0"
              contentTime
            />
            <span *ngIf="time.touched && time.errors"
              >O tempo deverá ser superior a 0!</span
            >
          </div>
        </div>

        <div class="div-content">
          <label class="col-sm-3 col-form-label">Descrição</label>
          <div class="col-sm-9">
            <input
              class="form-control"
              name="texto{{ i }}"
              placeholder="Descrição do conteúdo..."
              [(ngModel)]="content.text"
              #description="ngModel"
              required
            />
            <span *ngIf="!description.value && description.touched"
              >A descrição é obrigatória!</span
            >
          </div>
        </div>

        <div *ngIf="content.type == 'img'" class="div-content">
          <label class="col-sm-3 col-form-label">Arquivo de imagem</label>
          <div class="col-sm-9">
            <input
              *ngIf="!content.file"
              class="form-control"
              type="file"
              name="image{{ i }}"
              accept="image/x-png,image/gif,image/jpeg"
              (change)="onSelectFile($event.target.files, content)"
              required
            />
            <div *ngIf="content.file">
              <a [href]="content.file.file_link">{{
                content.file.description
              }}</a>
              <button class="btn btn-danger" (click)="onRemoveFile(content)">
                <i class="fa fa-trash"></i>
              </button>
            </div>
          </div>
        </div>

        <div *ngIf="content.type == 'audio'" class="div-content">
          <label class="col-sm-3 col-form-label">Arquivo de áudio</label>
          <div class="col-sm-9">
            <input
              *ngIf="!content.file"
              class="form-control"
              type="file"
              accept="audio/*"
              (change)="onSelectFile($event.target.files, content)"
            />
            <div *ngIf="content.file">
              <a [href]="content.file.file_link">{{
                content.file.description
              }}</a>
              <button class="btn btn-danger" (click)="onRemoveFile(content)">
                <i class="fa fa-trash"></i>
              </button>
            </div>
          </div>
        </div>

        <div *ngIf="content.type == 'doc'" class="div-content">
          <label class="col-sm-3 col-form-label">Documentos / PDF</label>
          <div class="col-sm-9">
            <input
              *ngIf="!content.file"
              class="form-control"
              type="file"
              accept="application/msword, application/pdf"
              (change)="onSelectFile($event.target.files, content)"
            />
            <div *ngIf="content.file">
              <a [href]="content.file.file_link">{{
                content.file.description
              }}</a>
              <button class="btn btn-danger" (click)="onRemoveFile(content)">
                <i class="fa fa-trash"></i>
              </button>
            </div>
          </div>
        </div>

        <div *ngIf="content.type == 'externo'" class="div-content">
          <label class="col-sm-3 col-form-label">Conteúdo externo</label>
          <div class="col-sm-9">
            <input
              class="form-control"
              name="externo{{ i }}"
              type="text"
              [(ngModel)]="content.url"
              placeholder="URL do conteúdo externo (Jogo, conteúdo interativo, etc...)"
              #url_extern="ngModel"
              required
            />
            <span *ngIf="!url_extern.value && url_extern.touched"
              >A URL do conteúdo é obrigatória!</span
            >
          </div>
        </div>

        <div *ngIf="content.type == 'zoom'">
          <div class="div-content">
            <label class="col-sm-3 col-form-label">API_KEY</label>
            <div class="col-sm-9">
              <input
                class="form-control"
                name="zoom_key{{ i }}"
                type="text"
                [(ngModel)]="content.zoom_api_key"
                placeholder="Insira aqui sua API_KEY"
                #api_key="ngModel"
                required
              />
              <span *ngIf="!api_key.value && api_key.touched"
                >A API_KEY é obrigatória!</span
              >
            </div>
          </div>
          <div class="div-content">
            <label class="col-sm-3 col-form-label">API_SECRET</label>
            <div class="col-sm-9">
              <input
                class="form-control"
                name="zoom_secret{{ i }}"
                type="text"
                [(ngModel)]="content.zoom_api_secret"
                placeholder="Insira aqui sua API_SECRET"
                #api_secret="ngModel"
                required
              />
              <span *ngIf="!api_secret.value && api_secret.touched"
                >A API_SECRET é obrigatória!</span
              >
            </div>
          </div>
          <div class="div-content">
            <label class="col-sm-3 col-form-label">Número da Sala</label>
            <div class="col-sm-9">
              <input
                class="form-control"
                name="zoom_room{{ i }}"
                type="text"
                [(ngModel)]="content.zoom_room"
                placeholder="Insira aqui o número da sala do Zoom"
                #number_room="ngModel"
                required
              />
              <span *ngIf="!number_room.value && number_room.touched"
                >O número da sala é obrigatória!</span
              >
            </div>
          </div>
        </div>

        <div *ngIf="content.type == 'youtube'">
          <div class="div-content">
            <label class="col-sm-3 col-form-label">Link Vídeo</label>
            <div class="col-sm-9">
              <input
                class="form-control"
                name="youtube_url{{ i }}"
                type="text"
                [(ngModel)]="content.url"
                placeholder="URL ao vivo (Youtube / Vimeo)"
                #url_stream="ngModel"
                required
              />
              <span *ngIf="!url_stream.value && url_stream.touched"
                >A URL da live é obrigatória!</span
              >
            </div>
          </div>
          <div class="div-content">
            <label class="col-sm-3 col-form-label">Link Reserva</label>
            <div class="col-sm-9">
              <input
                class="form-control"
                name="youtube_url_alternative{{ i }}"
                type="text"
                [(ngModel)]="content.url_alternative"
                placeholder="URL do vídeo gravado (Youtube / Vimeo)"
                #url_record="ngModel"
                required
              />
              <span *ngIf="!url_record.value && url_record.touched"
                >A URL do video gravado é obrigatória!</span
              >
            </div>
          </div>
          <div class="form-check form-check-inline div-content">
            <div class="col-sm-3">
              <input
                class="form-check-input"
                type="checkbox"
                name="controls{{ i }}"
                [(ngModel)]="content.controls"
              />
            </div>
            <label class="form-check-label col-sm-9">Exibir Controles</label>
          </div>
          <div class="form-check form-check-inline div-content">
            <div class="col-sm-3">
              <input
                class="form-check-input"
                type="checkbox"
                name="replay{{ i }}"
                [(ngModel)]="content.replay"
              />
            </div>
            <label class="form-check-label col-sm-9">Replay?</label>
          </div>
          <div class="form-check form-check-inline div-content">
            <div class="col-sm-3">
              <input
                class="form-check-input"
                type="checkbox"
                name="autoplay{{ i }}"
                [(ngModel)]="content.autoplay"
              />
            </div>
            <label class="form-check-label col-sm-9">Autoplay?</label>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
